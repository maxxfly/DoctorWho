<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>


<br/><br/>

<%= link_to "Ajout un docteur", new_doctor_url, :class => "btn btn-primary btn-lg"%>

<br/><br/>

<script>
	var doctors = <%= raw @doctors.to_json %>;
</script>
<div style="width: 40%; display: inline-block; vertical-align: top;" >
	<%= render partial: "doctor", collection: @doctors %>
</div>

<div style="width: 40%; display: inline-block;  vertical-align: top;" >
  <div id="map-canvas" style='width: 500px; height: 400px;'></div>
</div>

<script type="text/javascript">
      function initialize() {
        var mapOptions = {
          center: { lng: 2.35, lat: 48.8475908},
          zoom: 12
        };
        var map = new google.maps.Map(document.getElementById('map-canvas'),
            mapOptions);

        for(i=0; i < doctors.length; i++)
        {
	        var myLatlng = new google.maps.LatLng(doctors[i].latitude, doctors[i].longitude);

	        var marker = new google.maps.Marker({
			      position: myLatlng,
			      map: map,
			      title: doctors[i].first_name + " " + doctors[i].last_name 
  			  });

	     }


    }
    google.maps.event.addDomListener(window, 'load', initialize);


</script>



